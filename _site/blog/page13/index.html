<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>少左 shouzo</title>
    <meta name="description" content="">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href=" /css/fontawesome/css/font-awesome.min.css ">
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="http://shouzo.github.io/blog/page13/">
    <link rel="alternate" type="application/rss+xml" title="少左 shouzo" href="http://shouzo.github.io /feed.xml ">



</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">少左 shouzo</a>
        <small>BE STRONG TO BE USEFUL</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/blog/index.html">
                    
                        <i class="fa fa-home"></i>首頁 Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>內容 Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>分類 Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>標籤 Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>收藏 Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/demo/">
                        
                            <i class="fa fa-play"></i>展示 Demo
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-commenting"></i>關於 About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" index>
    <div class="left">
        <h1>Welcome to shouzo's Blog!</h1>
        <small>菜鳥的學習紀錄</small>
        <hr>
        <ul>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/07/14/30OS_day1/">20170714 [學習筆記] 30天作業系統自作入門筆記 (1)</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-07-14
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#組合語言" title="Category: 組合語言" rel="category">組合語言</a>&nbsp;
    
        <a href="/category/#C語言" title="Category: C語言" rel="category">C語言</a>&nbsp;
    
        <a href="/category/#作業系統" title="Category: 作業系統" rel="category">作業系統</a>&nbsp;
    
        <a href="/category/#程式設計" title="Category: 程式設計" rel="category">程式設計</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#組合語言" title="Tag: 組合語言" rel="tag">組合語言</a>&nbsp;
    
        <a href="/tag/#C語言" title="Tag: C語言" rel="tag">C語言</a>&nbsp;
    
        <a href="/tag/#作業系統" title="Tag: 作業系統" rel="tag">作業系統</a>&nbsp;
    
        <a href="/tag/#程式設計" title="Tag: 程式設計" rel="tag">程式設計</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#20170714---day_1" id="markdown-toc-20170714---day_1">20170714 - Day_1</a>    <ul>
      <li><a href="#一安裝-nasm-編譯映像檔" id="markdown-toc-一安裝-nasm-編譯映像檔">一、安裝 <code class="language-plaintext highlighter-rouge">nasm</code> ，編譯映像檔</a></li>
      <li><a href="#二新增虛擬機載入映像檔" id="markdown-toc-二新增虛擬機載入映像檔">二、新增虛擬機、載入映像檔</a></li>
      <li><a href="#三改變螢幕上面的字" id="markdown-toc-三改變螢幕上面的字">三、改變螢幕上面的字</a></li>
    </ul>
  </li>
</ul>

<ul>
  <li>工作環境
    <ul>
      <li>Lubuntu 17.04</li>
      <li>VMware Workstation 12.5.2</li>
    </ul>
  </li>
  <li>參考資料
    <ul>
      <li>Linux 版本筆記：<a href="http://lengly.top/archives/85">http://lengly.top/archives/85</a></li>
    </ul>
  </li>
</ul>

<h1 id="20170714---day_1">20170714 - Day_1</h1>
<ul>
  <li>進度摘要
    <ul>
      <li>使用 nasm 編譯映像檔，使用虛擬機模擬。</li>
    </ul>
  </li>
  <li>完整專案
    <ul>
      <li><a href="https://github.com/shouzo/My-30OS/tree/master/20170714">https://github.com/shouzo/My-30OS/tree/master/20170714</a></li>
    </ul>
  </li>
  <li>參考資料
    <ul>
      <li><a href="http://www.nasm.us/">NASM</a></li>
      <li><a href="http://www.smalljacky.com/introduction-to-computer/carry-digital-system-conversion/">數字系統_進制轉換教學</a></li>
      <li><a href="https://zh.wikipedia.org/wiki/FAT">FAT - 維基百科</a></li>
      <li><a href="https://zh.wikipedia.org/wiki/%E5%BC%95%E5%AF%BC%E6%89%87%E5%8C%BA">開機(啟動)磁區</a></li>
      <li><a href="http://flyeast-personal-area.blogspot.tw/2010/08/ipl-initial-program-loader.html">IPL - Initial Program Loader</a></li>
      <li><a href="https://www.lifewire.com/what-does-booting-mean-2625799">What Does Booting Mean?</a></li>
    </ul>
  </li>
</ul>

<h2 id="一安裝-nasm-編譯映像檔">一、安裝 <code class="language-plaintext highlighter-rouge">nasm</code> ，編譯映像檔</h2>
<p><strong>1. 在終端上輸入以下指令，安裝 <code class="language-plaintext highlighter-rouge">nasm</code></strong></p>
<blockquote>
  <p>sudo apt install nasm</p>
</blockquote>

<p><img src="https://i.imgur.com/lqQOAyY.png" alt="" /></p>

<p><strong>2. 用 vim 檢視 <code class="language-plaintext highlighter-rouge">helloos.nas</code> 的內容</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DB	0xeb, 0x4e, 0x90, 0x48, 0x45, 0x4c, 0x4c, 0x4f
DB	0x49, 0x50, 0x4c, 0x00, 0x02, 0x01, 0x01, 0x00
DB	0x02, 0xe0, 0x00, 0x40, 0x0b, 0xf0, 0x09, 0x00
DB	0x12, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
DB	0x40, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x29, 0xff
DB	0xff, 0xff, 0xff, 0x48, 0x45, 0x4c, 0x4c, 0x4f
DB	0x2d, 0x4f, 0x53, 0x20, 0x20, 0x20, 0x46, 0x41
DB	0x54, 0x31, 0x32, 0x20, 0x20, 0x20, 0x00, 0x00
RESB	16
DB	0xb8, 0x00, 0x00, 0x8e, 0xd0, 0xbc, 0x00, 0x7c
DB	0x8e, 0xd8, 0x8e, 0xc0, 0xbe, 0x74, 0x7c, 0x8a
DB	0x04, 0x83, 0xc6, 0x01, 0x3c, 0x00, 0x74, 0x09
DB	0xb4, 0x0e, 0xbb, 0x0f, 0x00, 0xcd, 0x10, 0xeb
DB	0xee, 0xf4, 0xeb, 0xfd, 0x0a, 0x0a, 0x68, 0x65
DB	0x6c, 0x6c, 0x6f, 0x2c, 0x20, 0x77, 0x6f, 0x72
DB	0x6c, 0x64, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00
RESB	368
DB	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0xaa
DB	0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
RESB	4600
DB	0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
RESB	1469432
</code></pre></div></div>
<p><img src="https://i.imgur.com/lTRNdvC.png" alt="" /></p>

<p>好吧，我發現自己看不懂…得找找相關的組合語言書籍。</p>

<p><strong>3. 將 <code class="language-plaintext highlighter-rouge">helloos.nas</code> 編譯成映像檔 <code class="language-plaintext highlighter-rouge">helloos.img</code></strong></p>
<blockquote>
  <p>nasm -o helloos.img helloos.nas</p>
</blockquote>

<p><img src="https://i.imgur.com/mof2KcD.png" alt="" /></p>

<h2 id="二新增虛擬機載入映像檔">二、新增虛擬機、載入映像檔</h2>
<p><strong>1. 環境配置 » 記憶體：256MB、硬碟：8GB</strong></p>

<p><img src="https://i.imgur.com/l0LDEAg.png" alt="" /></p>

<p><strong>2. 設定虛擬機欲讀取的映像檔位置</strong></p>
<ul>
  <li>在書本範例上是使用 “軟碟機” 讀取映像檔 <code class="language-plaintext highlighter-rouge">helloos.img</code>。</li>
</ul>

<p><img src="https://i.imgur.com/Ng6nstQ.png" alt="" /></p>

<p><strong>3. 啟動虛擬機</strong></p>
<ul>
  <li>可以看到螢幕上顯示 <code class="language-plaintext highlighter-rouge">hello, world</code> 後畫面停滯不動，觀察完後便可將虛擬機關機。</li>
</ul>

<p><img src="https://i.imgur.com/I3ap9DE.png" alt="" /></p>

<h2 id="三改變螢幕上面的字">三、改變螢幕上面的字</h2>
<p><strong>1. 用 vim 修改 <code class="language-plaintext highlighter-rouge">helloos.img</code> 映像檔</strong></p>
<ul>
  <li>將內文中的 <code class="language-plaintext highlighter-rouge">hello, world</code> 改成 <code class="language-plaintext highlighter-rouge">Hello, shouzo. Be Strong to Be Useful.</code>。</li>
</ul>

<p><img src="https://i.imgur.com/qv125bc.png" alt="" /></p>

<ul>
  <li>編輯完成後，將映像檔另存成 <code class="language-plaintext highlighter-rouge">hello_shouzo.img</code>。</li>
</ul>

<p><strong>2. 設定新的映像檔讀取位置後，啟動虛擬機</strong></p>
<ul>
  <li>本次將欲讀取的映像檔改成 <code class="language-plaintext highlighter-rouge">hello_shouzo.img</code>。</li>
</ul>

<p><img src="https://i.imgur.com/avcdhdB.png" alt="" /></p>


                </div>
                <div class="read-all">
                    <a  href="/2017/07/14/30OS_day1/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/06/22/linux_system/">20170622 [學習筆記] Linux 系統程式筆記總整理</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-06-22
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Linux" title="Category: Linux" rel="category">Linux</a>&nbsp;
    
        <a href="/category/#作業系統" title="Category: 作業系統" rel="category">作業系統</a>&nbsp;
    
        <a href="/category/#程式設計" title="Category: 程式設計" rel="category">程式設計</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#Linux" title="Tag: Linux" rel="tag">Linux</a>&nbsp;
    
        <a href="/tag/#作業系統" title="Tag: 作業系統" rel="tag">作業系統</a>&nbsp;
    
        <a href="/tag/#程式設計" title="Tag: 程式設計" rel="tag">程式設計</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    
                </div>
                <div class="read-all">
                    <a  href="/2017/06/22/linux_system/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/06/16/university_life/">20170616 [有感而發] 這四年我誤入歧途、又不務正業，但活得像是個人</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-06-16
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#社團" title="Category: 社團" rel="category">社團</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#心情記事" title="Tag: 心情記事" rel="tag">心情記事</a>&nbsp;
    
        <a href="/tag/#社團" title="Tag: 社團" rel="tag">社團</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#來自四年前的期許" id="markdown-toc-來自四年前的期許">來自四年前的期許</a>    <ul>
      <li><a href="#命運的分歧點" id="markdown-toc-命運的分歧點">命運的分歧點</a></li>
      <li><a href="#有什麼改變了" id="markdown-toc-有什麼改變了">有什麼改變了</a></li>
      <li><a href="#參與社會化的體現社團" id="markdown-toc-參與社會化的體現社團">參與社會化的體現：社團</a></li>
    </ul>
  </li>
</ul>

<p>前幾天是我們學校的畢業典禮，許多即將畢業的準學士生在校園各地穿著“學位服”和親朋好友拍照打卡；也因為這個緣故，這幾天臉書的動態牆上都被同學的畢業文洗版。</p>

<p>我是“形式上”的應屆畢業生，同時也是典禮幕後的工作人員(畢聯會)，當天照樣要處理各類雜事、應付奇葩的畢業生；雖說畢業典禮對我而言只是個“形式”，但它在其他應屆畢業生的心裡象徵著人生階段性的完成。這時候不發個畢業感言好像說不過去，可是我還在準備期末考(好掙扎阿)。</p>

<p>…算了，但還是來回顧一下這幾年的積累吧！</p>

<h2 id="來自四年前的期許">來自四年前的期許</h2>
<p>在高中時期，我習慣用筆記本記下每天發生的事情。後來 Facebook 崛起，就漸漸將一些事情放上 Facebook。
當時也做了來高雄之前的心情紀事…(<a href="https://www.facebook.com/danny200026/posts/368693933257313">這四年，不知道我又會訂下什麼目標</a>)</p>

<h3 id="命運的分歧點">命運的分歧點</h3>
<p>我想最關鍵的還是當年大一，在陰錯陽差之下擔任了社團的負責人。
原先只打算在這四年好好學習，把“唸書”定位為本業學好學滿，就這樣度過這四年。…就像個普通學生一樣，將自己埋首於書堆之中。…(<a href="https://www.facebook.com/danny200026/media_set?set=a.912476945545673.100003501287209&amp;type=3">夢想，Loading…</a>)
自從“誤入”社團之後，命運就改變了…(<a href="https://www.facebook.com/danny200026/media_set?set=a.1135413809918651.1073741847.100003501287209&amp;type=3">社團人生回顧系列</a>)</p>

<h3 id="有什麼改變了">有什麼改變了</h3>
<p>原先只活在自己世界的我迫於職務上的需求，發展了與人應對進退的能力，也開始學習和接觸未曾接觸的領域；原先只在意自己生活的我，開始學會關注社團成員和周遭朋友的生活；原先只願意為自己而行動的我，開始為了其他人發起從未有人嘗試的事情；也在經歷社團生活的旅途中，曾經有過一段感情。</p>

<p>我漸漸發覺︰「當年的陰錯陽差，讓我得以出現在某些人的生命裡，它或多或少改變了某些人的生活，同時也改變了我。」</p>

<p><strong>或許對於某些人而言，我是高應大的社團狂人、是體委傳奇；但是在卸下了頭上那名為“社團”的光環之後，我只是個“不務正業”的人而已。</strong></p>

<p>怎麼個不務正業？</p>

<p>「不被現有體制框架限制、脫離體制安排，透過獨立思考後瞭解現階段自己真正需要的究竟是什麼，再自行去學習為了滿足需求而必備的技能。」</p>

<h3 id="參與社會化的體現社團">參與社會化的體現：社團</h3>
<p>「社團到底在學什麼？古今中外為何有這麼多人願意以學分作為籌碼，投注其中？」這裡有一篇文章寫得很有意思…(<a href="https://www.facebook.com/makarove.iluete/posts/1503318633074386">誰給的出尊嚴，誰就能留住人</a>)</p>

<p>從大一被半銃康接任國術社、在大二升上大三之際創立跑酷社、大四被網羅去畢聯會…，社團生活佔滿我將近全部的大學生涯，而我從中到底學了什麼？</p>

<p>我從中 “粗淺地” 習得了兩大技能：<strong>思維模式</strong>、<strong>人際互動</strong>。</p>

<p>我自認自己是個內向的人，在某些時刻甚至會刻意離群索居，因為獨處讓我感到平靜。而我從參與社團的過程中找到了專屬於自己的開關，在必要時切換模式 (而任何模式下都是真實的自己，只是呈現的型態不一樣)。 <strong>久而久之我發現「參與社團的過程中，其實相當於參與社會化的過程」，而我也發現「唯有走入人群，才更能夠明白該如何真正的隱遁於人群之中」。</strong></p>

<p>說穿了，“外展” 和 “內斂” 只不過是一體的兩面。</p>

                </div>
                <div class="read-all">
                    <a  href="/2017/06/16/university_life/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/06/15/linux_system/">20170615 [學習筆記] Linux 系統程式 (15)</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-06-15
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Linux" title="Category: Linux" rel="category">Linux</a>&nbsp;
    
        <a href="/category/#作業系統" title="Category: 作業系統" rel="category">作業系統</a>&nbsp;
    
        <a href="/category/#程式設計" title="Category: 程式設計" rel="category">程式設計</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#Linux" title="Tag: Linux" rel="tag">Linux</a>&nbsp;
    
        <a href="/tag/#作業系統" title="Tag: 作業系統" rel="tag">作業系統</a>&nbsp;
    
        <a href="/tag/#程式設計" title="Tag: 程式設計" rel="tag">程式設計</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#一作業系統" id="markdown-toc-一作業系統">一、作業系統</a>    <ul>
      <li><a href="#一-allocation-of-frames" id="markdown-toc-一-allocation-of-frames">(一) Allocation of Frames</a>        <ul>
          <li><a href="#1-fixed-allocation" id="markdown-toc-1-fixed-allocation">1. Fixed Allocation</a></li>
          <li><a href="#2-priority-allocation" id="markdown-toc-2-priority-allocation">2. Priority Allocation</a></li>
          <li><a href="#3-global-vs-local-allocation" id="markdown-toc-3-global-vs-local-allocation">3. Global vs. Local Allocation</a></li>
          <li><a href="#4-non-uniform-memory-access" id="markdown-toc-4-non-uniform-memory-access">4. Non-Uniform Memory Access</a></li>
          <li><a href="#5-thrashing" id="markdown-toc-5-thrashing">5. Thrashing</a></li>
          <li><a href="#6-demand-paging-and-thrashing" id="markdown-toc-6-demand-paging-and-thrashing">6. Demand Paging and Thrashing</a></li>
          <li><a href="#7-working-set-model" id="markdown-toc-7-working-set-model">7. Working-Set Model</a></li>
          <li><a href="#8-page-fault-frequency" id="markdown-toc-8-page-fault-frequency">8. Page-Fault Frequency</a></li>
        </ul>
      </li>
      <li><a href="#二-memory-mapped-files" id="markdown-toc-二-memory-mapped-files">(二) Memory-Mapped Files</a></li>
      <li><a href="#三-other-considerations--prepaging" id="markdown-toc-三-other-considerations--prepaging">(三) Other Considerations – Prepaging</a></li>
      <li><a href="#四-other-issues" id="markdown-toc-四-other-issues">(四) Other Issues</a></li>
    </ul>
  </li>
</ul>

<h2 id="一作業系統">一、作業系統</h2>
<ul>
  <li>課堂講義
    <ul>
      <li><a href="https://github.com/shouzo/Operating-System_pages/blob/master/class-tutorial/20170615/ch09.pdf">Chapter 9: Virtual-Memory Management</a></li>
    </ul>
  </li>
</ul>

<h3 id="一-allocation-of-frames">(一) Allocation of Frames</h3>
<ul>
  <li>Each process needs minimum number of frames</li>
  <li>Example: IBM 370 – 6 pages to handle SS MOVE instruction:
    <ul>
      <li>instruction is 6 bytes, might span 2 pages</li>
      <li>2 pages to handle from</li>
      <li>2 pages to handle to</li>
    </ul>
  </li>
  <li>Maximum of course is total frames in the system</li>
  <li>Two major allocation schemes
    <ul>
      <li>fixed allocation</li>
      <li>priority allocation</li>
    </ul>
  </li>
  <li>Many variations</li>
</ul>

<h4 id="1-fixed-allocation">1. Fixed Allocation</h4>
<ul>
  <li>Equal allocation – For example, if there are 100 frames (after allocating frames for the OS) and 5 processes, give each process 20 frames
    <ul>
      <li>Keep some as free frame buffer pool</li>
    </ul>
  </li>
  <li>Proportional allocation – Allocate according to the size of process
    <ul>
      <li>Dynamic as degree of multiprogramming, process sizes change</li>
    </ul>
  </li>
</ul>

<p><img src="https://i.imgur.com/EwupsLy.png" alt="" /></p>

<h4 id="2-priority-allocation">2. Priority Allocation</h4>
<ul>
  <li>Use a proportional allocation scheme using priorities rather than size</li>
  <li>If process P i generates a page fault,
    <ul>
      <li>select for replacement one of its frames</li>
      <li>select for replacement a frame from a process with lower priority number</li>
    </ul>
  </li>
</ul>

<h4 id="3-global-vs-local-allocation">3. Global vs. Local Allocation</h4>
<ul>
  <li><strong>Global replacement</strong> – process selects a replacement frame from the set of all frames; one process can take a frame from another
    <ul>
      <li>But then process execution time can vary greatly</li>
      <li>But greater throughput so more common</li>
    </ul>
  </li>
  <li><strong>Local replacement</strong> – each process selects from only its own set of allocated frames
    <ul>
      <li>More consistent per-process performance</li>
      <li>But possibly underutilized memory</li>
    </ul>
  </li>
</ul>

<h4 id="4-non-uniform-memory-access">4. Non-Uniform Memory Access</h4>
<ul>
  <li>So far all memory accessed equally</li>
  <li>Many systems are NUMA – speed of access to memory varies
    <ul>
      <li>Consider system boards containing CPUs and memory, interconnected over a system bus</li>
    </ul>
  </li>
  <li>Optimal performance comes from allocating memory “close to” the CPU on which the thread is scheduled
    <ul>
      <li>And modifying the scheduler to schedule the thread on the same system board when possible</li>
      <li>Solved by Solaris by creating <strong>lgroups</strong>
        <ul>
          <li>Structure to track CPU / Memory low latency groups</li>
          <li>Used my schedule and pager</li>
          <li>When possible schedule all threads of a process and allocate all memory for that process within the lgroup</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="5-thrashing">5. Thrashing</h4>
<ul>
  <li>If a process does not have “enough” pages, the page-fault rate is very high
    <ul>
      <li>Page fault to get page</li>
      <li>Replace existing frame</li>
      <li>But quickly need replaced frame back</li>
      <li>This leads to:
        <ul>
          <li>Low CPU utilization</li>
          <li>Operating system thinking that it needs to increase the degree of multiprogramming</li>
          <li>Another process added to the system</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Thrashing</strong> - a process is busy swapping pages in and out</li>
</ul>

<p><img src="https://i.imgur.com/jBcF8pC.png" alt="" /></p>

<h4 id="6-demand-paging-and-thrashing">6. Demand Paging and Thrashing</h4>
<ul>
  <li>Why does demand paging work? <strong>Locality model</strong>
    <ul>
      <li>Process migrates from one locality to another</li>
      <li>Localities may overlap</li>
    </ul>
  </li>
  <li>Why does thrashing occur? <strong>size of locality &gt; total memory size</strong>
    <ul>
      <li>Limit effects by using local or priority page replacement</li>
    </ul>
  </li>
</ul>

<h4 id="7-working-set-model">7. Working-Set Model</h4>
<p><img src="https://i.imgur.com/Nsrm3Lw.png" alt="" />
<img src="https://i.imgur.com/Xy48qM2.png" alt="" /></p>

<ul>
  <li><strong>Keeping Track of the Working Set</strong>
<img src="https://i.imgur.com/QHoALdo.png" alt="" /></li>
</ul>

<h4 id="8-page-fault-frequency">8. Page-Fault Frequency</h4>
<ul>
  <li>More direct approach than WSS</li>
  <li>Establish “acceptable” <strong>page-fault frequency</strong> rate and use local replacement policy
    <ul>
      <li>If actual rate too low, process loses frame</li>
      <li>If actual rate too high, process gains frame</li>
    </ul>
  </li>
</ul>

<p><img src="https://i.imgur.com/ws4FmRA.png" alt="" />
<img src="https://i.imgur.com/ujHWuKv.png" alt="" /></p>

<h3 id="二-memory-mapped-files">(二) Memory-Mapped Files</h3>
<ul>
  <li>Memory-mapped file I/O allows file I/O to be treated as routine memory access by <strong>mapping</strong> a disk block to a page in memory</li>
  <li>A file is initially read using demand paging
    <ul>
      <li>A page-sized portion of the file is read from the file system into a physical page</li>
      <li>Subsequent reads/writes to/from the file are treated as ordinary memory accesses</li>
    </ul>
  </li>
  <li>Simplifies and speeds file access by driving file I/O through memory rather than <code class="language-plaintext highlighter-rouge">read()</code> and <code class="language-plaintext highlighter-rouge">write()</code> system calls</li>
  <li>Also allows several processes to map the same file allowing the pages in memory to be shared</li>
  <li>But when does written data make it to disk?
    <ul>
      <li>Periodically and / or at file <code class="language-plaintext highlighter-rouge">close()</code> time</li>
      <li>For example, when the pager scans for dirty pages</li>
    </ul>
  </li>
</ul>

<p><img src="https://i.imgur.com/zWof78r.png" alt="" /></p>

<h3 id="三-other-considerations--prepaging">(三) Other Considerations – Prepaging</h3>
<ul>
  <li>To reduce the large number of page faults that occurs at process startup</li>
  <li>Prepage all or some of the pages a process will need, before they are referenced</li>
  <li>But if prepaged pages are unused, I/O and memory was wasted</li>
  <li>Assume s pages are prepaged and α of the pages is used
    <ul>
      <li>Is cost of <code class="language-plaintext highlighter-rouge">s * α</code> save pages faults <code class="language-plaintext highlighter-rouge">&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;</code> than the cost of prepaging <code class="language-plaintext highlighter-rouge">s * (1-α)</code> unnecessary pages?</li>
      <li>α near zero » prepaging loses</li>
    </ul>
  </li>
</ul>

<h3 id="四-other-issues">(四) Other Issues</h3>
<p><img src="https://i.imgur.com/289vIx7.png" alt="" />
—
<img src="https://i.imgur.com/AzOr7n2.png" alt="" />
—
<img src="https://i.imgur.com/9ZuU18h.png" alt="" />
—
<img src="https://i.imgur.com/cHTpyGG.png" alt="" /></p>

                </div>
                <div class="read-all">
                    <a  href="/2017/06/15/linux_system/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/06/08/linux_system/">20170608 [學習筆記] Linux 系統程式 (14)</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-06-08
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Linux" title="Category: Linux" rel="category">Linux</a>&nbsp;
    
        <a href="/category/#作業系統" title="Category: 作業系統" rel="category">作業系統</a>&nbsp;
    
        <a href="/category/#程式設計" title="Category: 程式設計" rel="category">程式設計</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#Linux" title="Tag: Linux" rel="tag">Linux</a>&nbsp;
    
        <a href="/tag/#作業系統" title="Tag: 作業系統" rel="tag">作業系統</a>&nbsp;
    
        <a href="/tag/#程式設計" title="Tag: 程式設計" rel="tag">程式設計</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#一作業系統" id="markdown-toc-一作業系統">一、作業系統</a>    <ul>
      <li><a href="#一-background" id="markdown-toc-一-background">(一) Background</a></li>
      <li><a href="#二-virtual-address-space" id="markdown-toc-二-virtual-address-space">(二) Virtual Address Space</a></li>
      <li><a href="#三-demand-paging" id="markdown-toc-三-demand-paging">(三) Demand Paging</a>        <ul>
          <li><a href="#1-valid-invalid-bit" id="markdown-toc-1-valid-invalid-bit">1. Valid-Invalid Bit</a></li>
          <li><a href="#2-example" id="markdown-toc-2-example">2. Example</a></li>
          <li><a href="#3-optimizations" id="markdown-toc-3-optimizations">3. Optimizations</a></li>
        </ul>
      </li>
      <li><a href="#四-page-fault" id="markdown-toc-四-page-fault">(四) Page Fault</a>        <ul>
          <li><a href="#1-aspects-of-demand-paging" id="markdown-toc-1-aspects-of-demand-paging">1. Aspects of Demand Paging</a></li>
          <li><a href="#2-instruction-restart" id="markdown-toc-2-instruction-restart">2. Instruction Restart</a>            <ul>
              <li><a href="#performance-of-demand-paging" id="markdown-toc-performance-of-demand-paging">Performance of Demand Paging</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#五-copy-on-write" id="markdown-toc-五-copy-on-write">(五) Copy-on-Write</a></li>
      <li><a href="#六-page-replacement" id="markdown-toc-六-page-replacement">(六) Page Replacement</a>        <ul>
          <li><a href="#1-what-happens-if-there-is-no-free-frame" id="markdown-toc-1-what-happens-if-there-is-no-free-frame">1. What Happens if There is no Free Frame?</a></li>
          <li><a href="#2-basic-page-replacement" id="markdown-toc-2-basic-page-replacement">2. Basic Page Replacement</a></li>
          <li><a href="#3-page-and-frame-replacement-algorithms" id="markdown-toc-3-page-and-frame-replacement-algorithms">3. Page and Frame Replacement Algorithms</a>            <ul>
              <li><a href="#1-first-in-first-out-fifo-algorithm" id="markdown-toc-1-first-in-first-out-fifo-algorithm">(1) First-In-First-Out (FIFO) Algorithm</a></li>
              <li><a href="#2-optimal-algorithm" id="markdown-toc-2-optimal-algorithm">(2) Optimal Algorithm</a></li>
              <li><a href="#3-least-recently-used-lru-algorithm" id="markdown-toc-3-least-recently-used-lru-algorithm">(3) Least Recently Used (LRU) Algorithm</a></li>
              <li><a href="#4-lru-approximation-algorithms" id="markdown-toc-4-lru-approximation-algorithms">(4) LRU Approximation Algorithms</a></li>
              <li><a href="#5-counting-algorithms" id="markdown-toc-5-counting-algorithms">(5) Counting Algorithms</a></li>
              <li><a href="#6-page-buffering-algorithms" id="markdown-toc-6-page-buffering-algorithms">(6) Page-Buffering Algorithms</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="一作業系統">一、作業系統</h2>
<ul>
  <li>課堂講義
    <ul>
      <li><a href="https://github.com/shouzo/Operating-System_pages/blob/master/class-tutorial/20170608/ch09.pdf">Chapter 9: Virtual-Memory Management</a></li>
    </ul>
  </li>
</ul>

<h3 id="一-background">(一) Background</h3>
<ul>
  <li>Code needs to be in memory to execute, but entire program rarely used
    <ul>
      <li>Error code, unusual routines, large data structures</li>
    </ul>
  </li>
  <li>Entire program code not needed at same time</li>
  <li>Consider ability to execute partially-loaded program
    <ul>
      <li>Program no longer constrained by limits of physical memory</li>
      <li>Program and programs could be larger than physical memory</li>
    </ul>
  </li>
  <li><strong>Virtual memory</strong> – separation of user logical memory from physical memory
    <ul>
      <li>Only part of the program needs to be in memory for execution</li>
      <li>Logical address space can therefore be much larger than physical address space</li>
      <li>Allows address spaces to be shared by several processes</li>
      <li>Allows for more efficient process creation</li>
      <li>More programs running concurrently</li>
      <li>Less I/O needed to load or swap processes</li>
    </ul>
  </li>
  <li>Virtual memory can be implemented via
    <ul>
      <li>Demand paging</li>
      <li>Demand segmentation</li>
    </ul>
  </li>
</ul>

<h3 id="二-virtual-address-space">(二) Virtual Address Space</h3>
<p><img src="http://i.imgur.com/DkDhsAx.jpg" alt="" /></p>

<ul>
  <li>Enables <strong>sparse</strong> address spaces with holes left for growth, dynamically linked libraries, etc</li>
  <li>System libraries shared via mapping into virtual address space</li>
  <li>Shared memory by mapping pages read-write into virtual address space</li>
  <li>Pages can be shared during <code class="language-plaintext highlighter-rouge">fork()</code>, speeding process creation</li>
</ul>

<p><img src="http://i.imgur.com/3jsjqeH.png" alt="" /></p>

<h3 id="三-demand-paging">(三) Demand Paging</h3>
<ul>
  <li>Could bring entire process into memory at load time</li>
  <li>Or bring a page into memory only when it is needed
    <ul>
      <li>Less I/O needed, no unnecessary I/O</li>
      <li>Less memory needed</li>
      <li>Faster response</li>
      <li>More users</li>
    </ul>
  </li>
  <li>Page is needed » reference to it
    <ul>
      <li>invalid reference » abort</li>
      <li>not-in-memory » bring to memory</li>
    </ul>
  </li>
  <li><strong>Lazy swapper</strong> – never swaps a page into memory unless page will be needed
    <ul>
      <li>Swapper that deals with pages is a <strong>pager</strong></li>
    </ul>
  </li>
</ul>

<p><img src="https://i.imgur.com/aLRTern.png" alt="" /></p>

<h4 id="1-valid-invalid-bit">1. Valid-Invalid Bit</h4>
<ul>
  <li>With each page table entry a valid–invalid bit is associated (<strong>v</strong> » in-memory – <strong>memory resident</strong>, <strong>i</strong> » not-in-memory)</li>
  <li>Initially valid–invalid bit is set to <strong>i</strong> on all entries</li>
</ul>

<p><img src="https://i.imgur.com/0Fk929T.jpg" alt="" /></p>

<h4 id="2-example">2. Example</h4>
<ul>
  <li>Memory access time = 200 nanoseconds</li>
  <li>Average page-fault service time = 8 milliseconds
    <blockquote>
      <p>EAT = (1 – p) x 200 + p (8 milliseconds)
= (1 – p) x 200 + p x 8,000,000
= 200 + p x 7,999,800</p>
    </blockquote>
  </li>
  <li>If one access out of 1,000 causes a page fault, then EAT = 8.2 microseconds. (This is a slowdown by a factor of 40)</li>
  <li>If want performance degradation &lt; 10 percent
    <ul>
      <li>220 &gt; 200 + 7,999,800 x p</li>
      <li>20 &gt; 7,999,800 x p</li>
      <li>p &lt; .0000025 (&lt; one page fault in every 400,000 memory accesses)</li>
    </ul>
  </li>
</ul>

<h4 id="3-optimizations">3. Optimizations</h4>
<ul>
  <li>Copy entire process image to swap space at process load time
    <ul>
      <li>Then page in and out of swap space</li>
      <li>Used in older BSD Unix</li>
    </ul>
  </li>
  <li>Demand page in from program binary on disk, but discard rather than paging out when freeing frame
    <ul>
      <li>Used in Solaris and current BSD</li>
    </ul>
  </li>
</ul>

<h3 id="四-page-fault">(四) Page Fault</h3>
<ul>
  <li>If there is a reference to a page, first reference to that page will trap to operating system
    <ul>
      <li><strong>page fault</strong></li>
    </ul>
  </li>
  <li>Operating system looks at another table to decide
    <ul>
      <li>Invalid reference » abort</li>
      <li>Just not in memory</li>
    </ul>
  </li>
  <li>Get empty frame</li>
  <li>Swap page into frame via scheduled disk operation</li>
  <li>Reset tables to indicate page now in memory Set validation bit = <strong>v</strong></li>
  <li>Restart the instruction that caused the page fault</li>
</ul>

<p><img src="https://i.imgur.com/98V6oNY.png" alt="" /></p>

<h4 id="1-aspects-of-demand-paging">1. Aspects of Demand Paging</h4>
<ul>
  <li>Extreme case – start process with no pages in memory
    <ul>
      <li>OS sets instruction pointer to first instruction of process, non-memory-resident -&gt; page fault</li>
      <li>And for every other process pages on first access</li>
      <li><strong>Pure demand paging</strong></li>
    </ul>
  </li>
  <li>Actually, a given instruction could access multiple pages -&gt; multiple page faults
    <ul>
      <li>Pain decreased because of <strong>locality of reference</strong></li>
    </ul>
  </li>
  <li>Hardware support needed for demand paging
    <ul>
      <li>Page table with valid / invalid bit</li>
      <li>Secondary memory (swap device with <strong>swap space</strong>)</li>
      <li>Instruction restart</li>
    </ul>
  </li>
</ul>

<h4 id="2-instruction-restart">2. Instruction Restart</h4>
<ul>
  <li>Consider an instruction that could access several different locations
    <ul>
      <li>block move</li>
      <li>auto increment/decrement location</li>
      <li>Restart the whole operation?
        <ul>
          <li>What if source and destination overlap?</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="performance-of-demand-paging">Performance of Demand Paging</h5>
<ul>
  <li>Stages in Demand Paging
    <blockquote>
      <ol>
        <li>Trap to the operating system</li>
        <li>Save the user registers and process state</li>
        <li>Determine that the interrupt was a page fault</li>
        <li>Check that the page reference was legal and determine the location of the page on the disk</li>
        <li>Issue a read from the disk to a free frame:
(1) Wait in a queue for this device until the read request is serviced
(2) Wait for the device seek and/or latency time
(3) Begin the transfer of the page to a free frame</li>
        <li>While waiting, allocate the CPU to some other user</li>
        <li>Receive an interrupt from the disk I/O subsystem (I/O completed)</li>
        <li>Save the registers and process state for the other user</li>
        <li>Determine that the interrupt was from the disk</li>
        <li>Correct the page table and other tables to show page is now in memory</li>
        <li>Wait for the CPU to be allocated to this process again</li>
        <li>Restore the user registers, process state, and new page table, and then resume the interrupted instruction</li>
      </ol>
    </blockquote>
  </li>
</ul>

<p><img src="https://i.imgur.com/HA817pb.png" alt="" /></p>

<h3 id="五-copy-on-write">(五) Copy-on-Write</h3>
<ul>
  <li><strong>Copy-on-Write</strong> (COW) allows both parent and child processes to initially share the same pages in memory
    <ul>
      <li>If either process modifies a shared page, only then is the page copied</li>
    </ul>
  </li>
  <li>COW allows more efficient process creation as only modified pages are copied</li>
  <li>In general, free pages are allocated from a <strong>pool</strong> of <strong>zero-fill-on-demand</strong> pages
    <ul>
      <li>Why zero-out a page before allocating it?</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">vfork()</code> variation on <code class="language-plaintext highlighter-rouge">fork()</code> system call has parent suspend and child using copy-on-write address space of parent
    <ul>
      <li>Designed to have child call <code class="language-plaintext highlighter-rouge">exec()</code></li>
      <li>Very efficient</li>
    </ul>
  </li>
</ul>

<p><img src="http://i.imgur.com/LABMPPo.jpg" alt="" /></p>

<h3 id="六-page-replacement">(六) Page Replacement</h3>
<ul>
  <li>Prevent over-allocation of memory by modifying page-fault service routine to include page replacement</li>
  <li>Use <strong>modify (dirty) bit</strong> to reduce overhead of page transfers – only modified pages are written to disk</li>
  <li>Page replacement completes separation between logical memory and physical memory – large virtual memory can be provided on a smaller physical memory</li>
</ul>

<h4 id="1-what-happens-if-there-is-no-free-frame">1. What Happens if There is no Free Frame?</h4>
<ul>
  <li>Used up by process pages</li>
  <li>Also in demand from the kernel, I/O buffers, etc</li>
  <li>How much to allocate to each?</li>
  <li>Page replacement – find some page in memory, but not really in use, page it out
    <ul>
      <li>Algorithm – terminate? swap out? replace the page?</li>
      <li>Performance – want an algorithm which will result in minimum number of page faults</li>
    </ul>
  </li>
  <li>Same page may be brought into memory several times</li>
</ul>

<p><img src="https://i.imgur.com/eFpQyPv.png" alt="" /></p>

<h4 id="2-basic-page-replacement">2. Basic Page Replacement</h4>
<blockquote>
  <ol>
    <li>Find the location of the desired page on disk</li>
    <li>Find a free frame:
      <blockquote>
        <p>a. If there is a free frame, use it
b. If there is no free frame, use a page replacement algorithm to select a <strong>victim frame</strong>
c. Write victim frame to disk if dirty</p>
      </blockquote>
    </li>
    <li>Bring the desired page into the (newly) free frame; update the page and frame tables</li>
    <li>Continue the process by restarting the instruction that caused the trap
      <ul>
        <li>Note now potentially 2 page transfers for page fault – increasing EAT</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p><img src="https://i.imgur.com/Hm6MvuN.png" alt="" /></p>

<h4 id="3-page-and-frame-replacement-algorithms">3. Page and Frame Replacement Algorithms</h4>
<ul>
  <li><strong>Frame-allocation algorithm</strong> determines
    <ul>
      <li>How many frames to give each process</li>
      <li>Which frames to replace</li>
    </ul>
  </li>
  <li><strong>Page-replacement algorithm</strong>
    <ul>
      <li>Want lowest page-fault rate on both first access and re-access</li>
    </ul>
  </li>
  <li>Evaluate algorithm by running it on a particular string of memory references (reference string) and computing the number of page faults on that string
    <ul>
      <li>String is just page numbers, not full addresses</li>
      <li>Repeated access to the same page does not cause a page fault</li>
    </ul>
  </li>
</ul>

<h5 id="1-first-in-first-out-fifo-algorithm">(1) First-In-First-Out (FIFO) Algorithm</h5>
<p><img src="https://i.imgur.com/cSezcCO.png" alt="" />
<img src="https://i.imgur.com/NVa4BTe.png" alt="" />
<img src="https://i.imgur.com/6VeXbGw.png" alt="" /></p>

<h5 id="2-optimal-algorithm">(2) Optimal Algorithm</h5>
<ul>
  <li>Replace page that will not be used for longest period of time
    <ul>
      <li>9 is optimal for the example on the next slide</li>
    </ul>
  </li>
  <li>How do you know this?
    <ul>
      <li>Can’t read the future</li>
    </ul>
  </li>
  <li>Used for measuring how well your algorithm performs</li>
</ul>

<p><img src="https://i.imgur.com/1jc2ngr.png" alt="" /></p>

<h5 id="3-least-recently-used-lru-algorithm">(3) Least Recently Used (LRU) Algorithm</h5>
<ul>
  <li>Use past knowledge rather than future</li>
  <li>Replace page that has not been used in the most amount of time</li>
  <li>Associate time of last use with each page</li>
</ul>

<p><img src="https://i.imgur.com/RiLxhrF.png" alt="" /></p>

<ul>
  <li>Counter implementation
    <ul>
      <li>Every page entry has a counter; every time page is referenced through this entry, copy the clock into the counter</li>
      <li>When a page needs to be changed, look at the counters to find smallest value
        <ul>
          <li>Search through table needed</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Stack implementation
    <ul>
      <li>Keep a stack of page numbers in a double link form:</li>
      <li>Page referenced:
        <ul>
          <li>move it to the top</li>
          <li>requires 6 pointers to be changed</li>
        </ul>
      </li>
      <li>But each update more expensive</li>
      <li>No search for replacement</li>
    </ul>
  </li>
  <li>LRU and OPT are cases of <strong>stack algorithms</strong> that don’t have Belady’s Anomaly</li>
</ul>

<p><img src="http://i.imgur.com/yvsGPvm.jpg" alt="" /></p>

<h5 id="4-lru-approximation-algorithms">(4) LRU Approximation Algorithms</h5>
<ul>
  <li>LRU needs special hardware and still slow</li>
  <li><strong>Reference bit</strong>
    <ul>
      <li>With each page associate a bit, initially = 0</li>
      <li>When page is referenced bit set to 1</li>
      <li>Replace any with reference bit = 0 (if one exists)
        <ul>
          <li>We do not know the order, however</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Second-chance algorithm</strong>
    <ul>
      <li>Generally FIFO, plus hardware-provided reference bit</li>
      <li>Clock replacement</li>
      <li>If page to be replaced has
        <ul>
          <li>Reference bit = 0 -&gt; replace it</li>
          <li>reference bit = 1 then:
            <ul>
              <li>set reference bit 0, leave page in memory</li>
              <li>replace next page, subject to same rules</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><img src="http://i.imgur.com/jInNXqt.png" alt="" /></p>

<h5 id="5-counting-algorithms">(5) Counting Algorithms</h5>
<ul>
  <li>Keep a counter of the number of references that have been made to each page
    <ul>
      <li>Not common</li>
    </ul>
  </li>
  <li><strong>LFU Algorithm</strong>: replaces page with smallest count</li>
  <li><strong>MFU Algorithm</strong>: based on the argument that the page with the smallest count was probably just brought in and has yet to be used</li>
</ul>

<h5 id="6-page-buffering-algorithms">(6) Page-Buffering Algorithms</h5>
<ul>
  <li>Keep a pool of free frames, always
    <ul>
      <li>Then frame available when needed, not found at fault time</li>
      <li>Read page into free frame and select victim to evict and add to free pool</li>
      <li>When convenient, evict victim</li>
    </ul>
  </li>
  <li>Possibly, keep list of modified pages
    <ul>
      <li>When backing store otherwise idle, write pages there and set to non-dirty</li>
    </ul>
  </li>
  <li>Possibly, keep free frame contents intact and note what is in them
    <ul>
      <li>If referenced again before reused, no need to load contents again from disk</li>
      <li>Generally useful to reduce penalty if wrong victim frame selected</li>
    </ul>
  </li>
</ul>

                </div>
                <div class="read-all">
                    <a  href="/2017/06/08/linux_system/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          
            <a href="/blog/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="/blog/page12/" class="previous"><i class="fa fa-angle-left"></i></a>
          
          <span class="page_number ">13/24</span>
          
            <a href="/blog/page14/" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="/blog/page24" class="next"><i class="fa fa-angle-double-right"></i></a>
          
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    
                        <li><a href="/2021/05/18/30OS_day4/">20210518 [學習筆記] 30天作業系統自作入門筆記 (4)</a></li>
                    
                        <li><a href="/2021/05/17/30OS_day3/">20210517 [學習筆記] 30天作業系統自作入門筆記 (3)</a></li>
                    
                        <li><a href="/2021/05/16/2021_WFH_0/">20210516 [WFH] 在家工作系列 - Part 0</a></li>
                    
                        <li><a href="/2021/02/01/2020_Life-Work_9/">20210201 [年度回顧] 關於工作和生活 - Part 9</a></li>
                    
                        <li><a href="/2021/01/25/2020_Life-Work_8/">20210125 [年度回顧] 關於工作和生活 - Part 8</a></li>
                    
                        <li><a href="/2021/01/13/2020_Life-Work_7/">20210113 [年度回顧] 關於工作和生活 - Part 7</a></li>
                    
                        <li><a href="/2021/01/09/2020_Life-Work_6/">20210109 [年度回顧] 關於工作和生活 - Part 6</a></li>
                    
                        <li><a href="/2020/12/24/2020_Life-Work_5/">20201224 [年度回顧] 關於工作和生活 - Part 5</a></li>
                    
                        <li><a href="/2020/12/19/2020_Life-Work_4/">20201219 [年度回顧] 關於工作和生活 - Part 4</a></li>
                    
                        <li><a href="/2020/12/17/2020_Life-Work_3/">20201217 [年度回顧] 關於工作和生活 - Part 3</a></li>
                    
                </ul>
            </div>

            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    
                    <li>
                        <a href="/category/#C語言" class="categories-list-item" cate="C語言">
                            <span class="name">
                                C語言
                            </span>
                            <span class="badge">12</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#OpenCV" class="categories-list-item" cate="OpenCV">
                            <span class="name">
                                OpenCV
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Data-Science" class="categories-list-item" cate="Data-Science">
                            <span class="name">
                                Data-Science
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#R語言" class="categories-list-item" cate="R語言">
                            <span class="name">
                                R語言
                            </span>
                            <span class="badge">11</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Hackpad" class="categories-list-item" cate="Hackpad">
                            <span class="name">
                                Hackpad
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Git" class="categories-list-item" cate="Git">
                            <span class="name">
                                Git
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Python語言" class="categories-list-item" cate="Python語言">
                            <span class="name">
                                Python語言
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Android" class="categories-list-item" cate="Android">
                            <span class="name">
                                Android
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#專題製作" class="categories-list-item" cate="專題製作">
                            <span class="name">
                                專題製作
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#GitBook" class="categories-list-item" cate="GitBook">
                            <span class="name">
                                GitBook
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#社團" class="categories-list-item" cate="社團">
                            <span class="name">
                                社團
                            </span>
                            <span class="badge">12</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#運動科學" class="categories-list-item" cate="運動科學">
                            <span class="name">
                                運動科學
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#未分類" class="categories-list-item" cate="未分類">
                            <span class="name">
                                未分類
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#人工智慧" class="categories-list-item" cate="人工智慧">
                            <span class="name">
                                人工智慧
                            </span>
                            <span class="badge">7</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#Linux" class="categories-list-item" cate="Linux">
                            <span class="name">
                                Linux
                            </span>
                            <span class="badge">17</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#作業系統" class="categories-list-item" cate="作業系統">
                            <span class="name">
                                作業系統
                            </span>
                            <span class="badge">22</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#程式設計" class="categories-list-item" cate="程式設計">
                            <span class="name">
                                程式設計
                            </span>
                            <span class="badge">24</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#組合語言" class="categories-list-item" cate="組合語言">
                            <span class="name">
                                組合語言
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#資料結構" class="categories-list-item" cate="資料結構">
                            <span class="name">
                                資料結構
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#演算法" class="categories-list-item" cate="演算法">
                            <span class="name">
                                演算法
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#計算機結構" class="categories-list-item" cate="計算機結構">
                            <span class="name">
                                計算機結構
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#迴光返照系列" class="categories-list-item" cate="迴光返照系列">
                            <span class="name">
                                迴光返照系列
                            </span>
                            <span class="badge">16</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#活動心得" class="categories-list-item" cate="活動心得">
                            <span class="name">
                                活動心得
                            </span>
                            <span class="badge">19</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#學習筆記" class="categories-list-item" cate="學習筆記">
                            <span class="name">
                                學習筆記
                            </span>
                            <span class="badge">21</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#年度回顧" class="categories-list-item" cate="年度回顧">
                            <span class="name">
                                年度回顧
                            </span>
                            <span class="badge">15</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#在家工作" class="categories-list-item" cate="在家工作">
                            <span class="name">
                                在家工作
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    
                    
                    
                    
                    

                    
                      
                      
                      
                      
                      
                      <a href="/tag/#C語言" style="font-size: 12.5pt; color: #666;">C語言</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#程式設計" style="font-size: 18pt; color: #000;">程式設計</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#OpenCV" style="font-size: 9.5pt; color: #888;">OpenCV</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Data-Science" style="font-size: 11.5pt; color: #666;">Data-Science</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Data-Mining" style="font-size: 11pt; color: #777;">Data-Mining</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#R語言" style="font-size: 12pt; color: #666;">R語言</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#版本控制" style="font-size: 9pt; color: #999;">版本控制</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Hackpad" style="font-size: 9pt; color: #999;">Hackpad</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Git" style="font-size: 9pt; color: #999;">Git</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Python語言" style="font-size: 9pt; color: #999;">Python語言</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Android" style="font-size: 9pt; color: #999;">Android</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#專題製作" style="font-size: 9pt; color: #999;">專題製作</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#GitBook" style="font-size: 9pt; color: #999;">GitBook</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#社團" style="font-size: 12.5pt; color: #666;">社團</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#傷害緩解" style="font-size: 9pt; color: #999;">傷害緩解</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#原始點療法" style="font-size: 9pt; color: #999;">原始點療法</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#心情記事" style="font-size: 10.5pt; color: #777;">心情記事</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#人工智慧" style="font-size: 11pt; color: #777;">人工智慧</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Linux" style="font-size: 14pt; color: #444;">Linux</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#作業系統" style="font-size: 15.5pt; color: #333;">作業系統</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#Vim" style="font-size: 9.5pt; color: #999;">Vim</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#組合語言" style="font-size: 10pt; color: #888;">組合語言</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#資料結構" style="font-size: 9pt; color: #999;">資料結構</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#演算法" style="font-size: 9pt; color: #999;">演算法</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#計算機結構" style="font-size: 9pt; color: #999;">計算機結構</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#當兵生活紀實" style="font-size: 13.5pt; color: #444;">當兵生活紀實</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#活動心得" style="font-size: 14.5pt; color: #444;">活動心得</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#學習筆記" style="font-size: 15pt; color: #333;">學習筆記</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#年度回顧" style="font-size: 13pt; color: #555;">年度回顧</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#企劃書" style="font-size: 9pt; color: #999;">企劃書</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#清華大學" style="font-size: 10pt; color: #888;">清華大學</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#推甄" style="font-size: 10pt; color: #888;">推甄</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#運動科學" style="font-size: 10pt; color: #888;">運動科學</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#生活" style="font-size: 11.5pt; color: #666;">生活</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#工作" style="font-size: 11.5pt; color: #666;">工作</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#WFM" style="font-size: 9pt; color: #999;">WFM</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#進修" style="font-size: 9pt; color: #999;">進修</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#COVID-19" style="font-size: 9pt; color: #999;">COVID-19</a>
                    
                </div>
            </div>

            <!-- <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul  class="content-ul">

                </ul>
            </div> -->
        </div>
    </div>
</div>
<!-- <script src="/js/scroll.min.js " charset="utf-8"></script> -->
<!-- <script src="/js/pageContent.js " charset="utf-8"></script> -->



    <footer class="site-footer">


  <div class="wrapper">
     <p class="cc - icon">
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/tw/"><img alt="創用 CC 授權條款" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/tw/88x31.png" /></a>
      </p>


      <p class="description">
          
          Martial Artist、Traceur & Developer!
          
      </p>


        <p class="contact">
            Contact me at:
            
            <a href="https://github.com/shouzo"><i class="fa fa-github" aria-hidden="true"></i></a>
            

            
            <a href="mailto:danny200026@yahoo.com.tw"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>
            

            

            

            

            
            <a href="https://www.facebook.com/danny200026"><i class="fa fa-facebook-official" aria-hidden="true"></i></a>
            
        </p>


        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
            <span>
                <br> 除非另有註明，本部落格內容皆採用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/tw/"> 創用 CC 姓名標示-非商業性-相同方式分享 3.0 台灣 </a> 授權條款
            </span>
        </p>

  </div>
	
	
	<div class="realtimeuserscounter realtimeuserscounter--styled"></div>
	<script src="https://realtimeusers.bycontrast.co/realtimeusers.js"></script>
	
</footer>
<script src="/js/main.js " charset="utf-8"></script>
    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
